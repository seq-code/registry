<% @genome = @name.genome %>
<% if @genome.present? %>
  <dl name="genomics" class="main-section name-details">
    <h2>Genomics</h2>

    <% if @genome.multiple_names? %>
      <div class="alert alert-danger">
        This genome has been associated as type material for multiple names:
        <ul>
          <% @genome.names.each do |name| %>
            <li><%= link_to(name) { %><%= name.name_html %><% } %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <dt><%= fa_icon('dna') %> Accession</dt>
    <dd>
      <%= link_to(@genome.link, target: '_blank') do %>
        <%= @genome.text %>
        <%= fa_icon('external-link-alt', class: 'ml-1') %>
      <% end %>
    </dd>

    <% if @genome.kind.present? %>
      <dt><%= fa_icon('microscope') %> Type</dt>
      <dd><%= @genome.kind_name %></dd>
    <% end %>

    <% if @genome.completeness_any? || @genome.contamination_any? %>
      <dt><%= fa_icon('star-half-alt') %> Estimated Quality Metrics</dt>
      <dd>
        <% if @genome.completeness_any? %>
          <b>Completeness:</b> <%= @genome.completeness_any %>%<br/>
        <% end %>
        <% if @genome.contamination? %>
          <b>Contamination:</b> <%= @genome.contamination_any %>%<br/>
        <% end %>
        <% if @genome.quality_any? %>
          <b>Quality:</b> <%= @genome.quality_any %><br/>
        <% end %>
      </dd>
    <% end %>

    <% if @genome.seq_depth.present? %>
      <dt><%= fa_icon('align-center') %> Sequencing depth</dt>
      <dd><%= @genome.seq_depth %> X</dd>
    <% end %>

    <% if @genome.source? %>
      <dt><%= fa_icon('flask') %> Source</dt>
      <dd>
        <%= link_to(@genome.source_link, target: '_blank') do %>
          <%= @genome.source_text %> <%= fa_icon('external-link-alt') %>
        <% end %>
      </dd>
    <% end %>

    <% if @genome.rrnas_or_trnas? %>
      <dt><%= fa_icon('splotch') %> Ribosomal and transfer RNA genes</dt>
      <dd>
        <ul>
          <% if @genome.number_of_16s_any.present? %>
            <li>
              <%= pluralize(@genome.number_of_16s_any, '16S rRNA') %>
              <%= @genome.most_complete_16s_any.present? ?
                    "(up to #{@genome.most_complete_16s}%)" :
                    'unknown length'  %>
            </li>
          <% end %>
          <% if @genome.number_of_23s_any.present? %>
            <li>
              <%= pluralize(@genome.number_of_23s_any, '23S rRNA') %>
              <%= @genome.most_complete_23s_any.present? ?
                    "(up to #{@genome.most_complete_23s}%)" :
                    'unknown length'  %>
            </li>
          <% end %>
          <% if @genome.number_of_trnas_any.present? %>
            <li>
              <%= pluralize(@genome.number_of_trnas_any, 'tRNA') %>
            </li>
          <% end %>
        </ul>
      </dd>
    <% end %>

    <% if @genome.submitter_comments? %>
      <dt><%= fa_icon('comment-alt') %> Submitter comments</dt>
      <dd><%= @genome.submitter_comments %></dd>
    <% end %>

    <dt><%= fa_icon('robot') %> Automated checks</dt>
    <dd><%=
      @genome.auto_check ? 'Complete' :
        @genome.kind? ? 'Scheduled' : 'Missing information'
    %></dd>

    <% if @name.can_edit?(current_user) %>
      <dd class="mt-4">
        <%= link_to(
              edit_genome_path(@genome, name: @name.id),
              class: 'btn btn-info'
            ) do %>
          <%= fa_icon('edit') %> Edit genome data
        <% end %>
      </dd>
    <% end %>
  </dl>
<% end %>
